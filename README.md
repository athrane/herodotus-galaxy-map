# herodotus-galaxy-map
Visualizer for galaxy map generated by the Herodotus project

# Usage
Open a browser and go to [Herodotus Galaxy Map](https://athrane.github.io/herodotus-galaxy-map).

Click on the **Arrow Downs** button at the upper left corner to load data file. 

# Development
The project is developed in [cables.gl](https://cables.gl/home).

## Installing the generator code into the cables.gl patch
The generator code is implemented by the athrane/herodotus repository.

To install the bundle build into the cables.gl patch, follow these steps:

### Create versioned bundle-galaxygen.js file
* Build the bundle using the command: `npm run build:galaxygen`
* Delete the program code at the end starting with the import statements.
* Download the `bundle-galaxygen.js` file.
* Soft-version the file by renaming the bundle file with the current DDMMYY, e.g. `bundle-galaxygen-020625.js`

### Delete to old bundle.js file
* Open the Cables.gl patch.
* Locate and open the `RunSimulation` operator.
* Locate the DEPENDENCIES section of the configuration, delete the reference to the used bundle.js file.
* (Select the Patch Files menu).
* (Delete the current `bundle-galaxygen-DDMMYY.js` file).

### Upload new bundle.js file
* Open the Cables.gl patch.
* Locate and open the `GalaxyGenerator` operator.
* Locate the DEPENDENCIES section of the configuration
* Select the `Add` Button.
* Select the library type as `commonjs`
* Upload the `bundle-galaxygen-020625.js` file created previouly.
* Look in the Cables.gl log and fix the errors.

## How to fix the simulation operators if cables.gl fails to create instance of it 

In some cases cables.gl will fail to create an instance of the `RunSimulation` and other simulation operators within the patch. 
The can happen if there are code errors or interfaces changes in the simulation operators code that introduce errors in the JavaScript code in the operator.

If an operator fails to get instanciated, follow these steps to correct the error:

* On the patch canvas, press ESC to add an operator.
* Write `GalaxyGenerator`and select the `Ops.User.thrane.Herodotus.GalaxyGenerator` operator.
* Select `View Documentation`.
* Scroll to the bottom of the page and select `Edit Op Code`
* Update the code to fix any error and/or adopt to changes in the agent code:
